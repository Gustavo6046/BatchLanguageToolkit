<!DOCTYPE html>

<html>
    </head>
        <meta name="description" content="Unreal Latko Translator -  BLT Demonstration.">
        <meta name="keywords" content="latko,translator,python,demo">
        <meta name="author" content="Gustavo6046 (Gustavo R. Rehermann)">
        <meta charset="UTF-8" />
        
        <link rel="icon" href="web/UnrealFavIco.png" type="image/png">
        <title>Latko Translator - BLT Demo</title>
        
        <link href="https://fonts.googleapis.com/css?family=Coda+Caption:800" rel="stylesheet"> 
        <link href="https://fonts.googleapis.com/css?family=PT+Mono" rel="stylesheet"> 
        <style>
            html, body {
                width: 100%;
                max-width: 100%;
                height: 100%;
                max-height: 100%;
            }
        
            body {
                font-family: "Coda Caption", sans-serif;
                color: #205810; 
                background-color: #110804;
                display: flex;
                flex-direction: column;
                align-content: stretch;
                margin: 0px;
            }
            
            .centertext {
                text-align: center;
                margin: 0px;
            }
            
            .gradtext {
                background: -webkit-linear-gradient(#0F0, #121);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                text-shadow:
                            -2px 1px #207810,
                            -2px 2px #205810, 
                            -2px 3px #185008, 
                            -3px 4px #154505, 
                            -3px 5px #113004, 
                            -4px 6px #071004;
                background-clip: text;
            }
            
            h1 {
                text-align: center;
                margin: 0px;
                font-size: 2.5em;
            }
            
            #input {
                margin: 10px;
                flex: 1;
                margin-left: 15em;
                margin-right: 15em;
                background-color: #000;
                color: #9f9;
            }
            
            #output {
                margin: 10px;
                flex: 1.5;
                font-family: "PT Mono";
                text-shadow: 0px 0px #0000;
                padding: 5px;
                position: relative;
                text-align: center;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            
            #translator {
                height: 100%;
                image-rendering: pixelated;
                display: flex;
                align-items: center;
                position: relative;
            }
            
            #centered {
                width: 100%;
                text-align: center;
                max-height: 100%;
                height: 100%;
                background-image: url("web/UnrealTranslator.png");
                background-repeat: no-repeat;
                background-position: center;
                background-size: contain;
            }
            
            #keepRatio {
                position: relative;
                height: 100%;
                width: 100%;
            }
            
            img {
                transform: translate(-50%, 0);
                position: absolute;
                left: 50%;
                display: block;
                max-width: 100%;
                max-height: 100%;
                width: auto;
                height: 100%;
                object-fit: contain;
            }
            
            #translated {
                position: absolute;
                max-width: 75vh;
                max-height: 32.5vh;
                left: 50%;
                transform: translate(-50%, 0%);
                top: 17%;
                color: #20CC18;
                mix-blend-mode: color-dodge;
                overflow-y: auto;
            }
        </style>
        
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        
        <script>
            writing = 0;
            pending = null;
        
            setInterval(function() {
                if ( writing == 0 && pending != null )
                {
                    pending();
                    pending = null;
                }
                
                writing = Math.max(writing - 1, 0);
            }, 100);
        
            translate = function translate(data, target)
            {
                if ( target.innerHTML.length == 0 ) target.innerHTML = '...';
                pending = function() {
                    $.post({
                        url: "./translate",
                        data: JSON.stringify({data: data}, null, '\t'),
                        contentType: "application/json;charset=UTF-8",
                        success: function(data, status, req)
                        {
                            target.innerHTML = data;
                            writing = false;
                        }
                    });
                };
                writing = 2;
            }
        </script>
    </head>
    
    <body>
        <div class="centertext gradtext">English to</div>
        <h1 class="gradtext">Latko</h1>
        <textarea id="input" oninput="translate(this.value, document.getElementById('translated'));"></textarea>
        <div id="output">
            <div id="translator">
                <div id="centered">
                    <!-- <image src="web/UnrealTranslator.png" /> -->
                    <div id="translated"></div>
                </div>           
            </div>
        </div>
        
        <script>
            document.getElementById('input').value = '';
        </script>
    </body>
</html>
